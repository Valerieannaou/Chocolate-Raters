<h1>Chocolates</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Rating</th>
    <th></th>
    <th></th>
  </tr>

  <% @chocolates.each do |chocolate| %>
      <tr>
        <td><%= link_to chocolate.name, chocolate %></td>
        <td><%= number_with_precision chocolate.ratings.average(:rate), :precision => 2 %></td>
      </tr>
  <% end %>
</table>

<br />
<h1>Chocolatiers</h1>
<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Country</th>
    <th></th>
    <th></th>
  </tr>

  <% @chocolates_by_unique_chocolatier.each do |chocolate| %>
      <tr>
        <% chocolatier = Chocolatier.find(chocolate.chocolatier_id) %>
        <td><%= link_to chocolatier.name, chocolatier %></td>
        <td ><%= chocolatier.email %></td>
        <td ><%= chocolatier.country %></td>
      </tr>
  <% end %>
</table>
